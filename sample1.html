<!doctype html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style>
        section{
            padding: 30% 0;
        }

        input{
            border-radius: 0;
        }

        h4{
            margin-top: 30px;
            color: blueviolet;
        }

        body{
            font-family: cursive;
            background-image: linear-gradient(to right, rgba(71, 4, 38, 0.575), rgba(39, 1, 90, 0.63)), url('https://fandomwire.com/wp-content/uploads/2018/08/Movies-background.png');
            background-repeat: no-repeat;
            background-size: cover;
        }

        #result{
            transition-duration: 1s;
        }
    </style>

  </head>
  <body>

    <div class="col-md-8 card shadow-lg mx-auto mt-5">
        <div class="card-body">
            <h1 class="text-center">Enter a Movie Name</h1>
            <hr>
            <input type="text" class="form-control mb-4" placeholder="Movie Name" id="movie_name">
            <input type="text" class="form-control mb-4" id="year" placeholder="Release Year">
            <button id="search" class="btn btn-primary">Search</button>

            <div class="mb-5 mt-5" id="result" >
                <h2 class="mb-5" style="background-color: blueviolet;color: white;padding: 10px 10px;text-align: center;">Movie Details</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="">
                            <img class="" src="" id="poster">
                        </div>
                    </div>
                    <div class="col-md-8">

                        <div class="row">
                            <div class="col-md-6">
                                <h3>Title : </h3>
                                <h4 id="title"></h4>

                                <br>
                                <h3>Release Year : </h3>
                                <h4 id="year"></h4>

                                <br>
                                <h3>Censor Rating : </h3>
                                <h4 id="rated"></h4>

                                <!-- <br>
                                <h3>Real : </h3>
                                <h4 id="released"></h4> -->

                                <br>
                                <h3>Runtime : </h3>
                                <h4 id="runtime"></h4>

                                <br>
                                <h3>Genre : </h3>
                                <h4 id="genre"></h4>

                                <br>
                                <h3>Director : </h3>
                                <h4 id="director"></h4>

                                <br>
                                <h3>Writer : </h3>
                                <h4 id="writer"></h4>

                                <br>
                                <h3>Actors : </h3>
                                <h4 id="actors"></h4>

                                

                            </div>

                            <div class="col-md-6">

                                <br>
                                <h3>Story : </h3>
                                <h4 id="plot"></h4>

                                <br>
                                <h3>Language : </h3>
                                <h4 id="language"></h4>

                                <br>
                                <h3>Country : </h3>
                                <h4 id="country"></h4>

                                <br>
                                <h3>Awards : </h3>
                                <h4 id="awards"></h4>

                                <br>
                                <h3>User Ratings : </h3>
                                <h4 id="rating"></h4>

                                <br>
                                <h3>Meta Score : </h3>
                                <h4 id="metascore"></h4>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://unpkg.com/scrollreveal"></script>
        
    <script>
        document.getElementById('result').style.display = 'none';
        ScrollReveal().reveal('.text-center', {delay : 100, easing: 'ease-in', distance : '100px', origin : 'left'});

        let apikey = '2467ae4b';

        // Set up our HTTP request
        var xhr = new XMLHttpRequest();

        // Setup our listener to process completed requests
        xhr.onload = function () {

            // Process our return data
            if (xhr.status >= 200 && xhr.status < 300) {
                // What do when the request is successful
                // console.log('success!', xhr);
                data = xhr.response;
                data = JSON.parse(data);
                console.log(data);
                keys = Object.keys(data);

                // for(let i=0;i<keys.length;i++){
                //     document.getElementById('result').innerHTML+=`<h3>${keys[i]}</h3><h4>${data[keys[i]]}</h4>`;
                // }
                document.getElementById('result').style.display = "relative";
                document.getElementById('poster').setAttribute('src', data['Poster'])
                document.getElementById('title').innerHTML=data['Title'];
                document.getElementById('year').innerHTML=data['Year'];
                document.getElementById('rated').innerHTML=data['Rated'];
                document.getElementById('runtime').innerHTML=data['Runtime'];
                document.getElementById('genre').innerHTML=data['Genre'];
                document.getElementById('director').innerHTML=data['Director'];
                document.getElementById('writer').innerHTML=data['Writer'];
                document.getElementById('actors').innerHTML=data['Actors'];
                document.getElementById('plot').innerHTML=data['Plot'];
                document.getElementById('language').innerHTML=data['Language'];
                document.getElementById('country').innerHTML=data['Country'];
                document.getElementById('rating').innerHTML=data['Rating'];
                document.getElementById('awards').innerHTML=data['Awards'];
                document.getElementById('metascore').innerHTML=data['Metascore'];
                // document.getElementById('runtime').innerHTML=data['Runtime'];
                // document.getElementById('runtime').innerHTML=data['Runtime'];
                // document.getElementById('runtime').innerHTML=data['Runtime'];
                document.getElementById('result').style.display = 'block';

            } else {
                // What do when the request fails
                console.log('The request failed!');
            }

            // Code that should run regardless of the request status
            console.log('This always runs...');
        };

        // Create and send a GET request
        // The first argument is the post type (GET, POST, PUT, DELETE, etc.)
        // The second argument is the endpoint URL
        
        
        getDetails = (name, year) => {
            xhr.open('GET', 'http://www.omdbapi.com/?t='+name+'&plot=full&apikey=2467ae4b');
            xhr.send();
        }
        // document.getElementById('search').onclick(event => {
        //     console.log(event);
        // })

        document.addEventListener('click', function (event) {

        // If the clicked element doesn't have the right selector, bail
        if (!event.target.matches('#search')) return;

        // Don't follow the link
        // event.preventDefault();

        // Log the clicked element in the console
        // console.log(event);
        getDetails(document.getElementById('movie_name').value, document.getElementById('year').value);
        }, false);

    </script>
  </body>
</html>